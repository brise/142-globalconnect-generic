(X=>{function N(e){var a,r,s,i=this;if(i.target&&e.type)switch(i.key){case"BN":switch(e.type){case"set":i.init();break;case"propped":K=i.root.props.mode.get(),i.addAttr("mode_"+K,{name:"mode_"+K,global:!0}),W=i.root.props.purpose.get(),i.addAttr("purpose_"+W,{name:"purpose_"+W,global:!0}),H=i.root.props.compression.get(),i.addAttr("compression_"+H,{name:"compression_"+H,global:!0});var t="name_"+i.getMacros().name;i.addAttr(t,{name:t,global:!0});break;case"init":i.preload();break;case"preload":i.build(),i.actuate();break;case"build":if(e.detail)switch(e.detail.key){case"SQ":e.detail.data=(e=>{try{var a={};z.each(e.frames,function(e){var t;e.layers.FG&&e.layers.FG.layers.FG_OBJ.layers.FG_IMG.layers[0]&&(a[e.groups.SQ_setup.macros.SQ_priority.value]||((t=z.cloneObject(e.layers.FG)).layers.FG_OBJ.layers.FG_IMG.groups.FI_anim.macros.FI_anim_skip.value=!0,a[e.groups.SQ_setup.macros.SQ_priority.value]=t))}),z.each(e.frames,function(e){e.layers.FG&&e.layers.FG.layers.FG_OBJ.layers.FG_IMG.layers[0]&&("high"!==H||"medium"!==e.groups.SQ_setup.macros.SQ_priority.value&&"low"!==e.groups.SQ_setup.macros.SQ_priority.value?"medium"===H&&"low"===e.groups.SQ_setup.macros.SQ_priority.value&&(a.medium?e.layers.FG=a.medium:a.high?e.layers.FG=a.high:e.layers.FG.layers.FG_OBJ.layers.FG_IMG.layers[0]=null):a.high?e.layers.FG=a.high:e.layers.FG.layers.FG_OBJ.layers.FG_IMG.layers[0]=null)})}catch(e){}return e})(e.detail.data),e.detail.data=e.detail.data,e.detail.data=(i=>{try{for(var e=0,t=0;t<i.frames.length;t++){var a=i.frames[t];try{var r=a.groups.SQ_setup.macros.SQ_filter.value.split("_"),s=function(e,t,a,r,s){e=z.cloneObject(e);return e.groups.SQ_setup.macros.SQ_filter.value=a[1],e.groups.SQ_setup.macros.SQ_split.value=r,e.groups.SQ_setup.macros.SQ_split_parent.value=s,i.frames.splice(t,0,e),e};"split"!==r[0]||"split"!==a.groups.SQ_setup.macros.SQ_type.value||"all"!==r[1]&&"limited"!==r[1]&&"micro"!==r[1]&&"small"!==r[1]||!a.layers.MS.layers.MS_OBJ.layers.MS_TXT.layers[1].enabled||(a.groups.SQ_setup.macros.SQ_filter.value=r[1]+"_exc",a.groups.SQ_setup.macros.SQ_split_parent={value:t},a.params.duration=Math.round(a.params.duration/1.5),s(a,t+1,r,0,t),s(a,t+2,r,1,t),Y.frame+e>t&&(e+=2))}catch(e){}}Y.frame=Y.frame+e}catch(e){}return i})(e.detail.data);var c=e.detail.parent.getTarget(e.detail.key),o=e.detail.key,B=e.detail.data.frames.length;try{var n=z.getElementsByKey(c,o+"_0")[0];if(n)for(var d,l=1;l<B;l++)document.querySelector("[data-key="+o+"_"+l+"]")||((d=n.cloneNode(!0)).setAttribute("data-key",o+"_"+l),c.appendChild(d))}catch(e){}return void("debug"===K&&Y.jump&&(e.detail.data.params.play.from=Y.frame,z.isEmptyString(Y.scope[1].split("_").pop())&&!Y.pause||(e.detail.data.params.pause.after.time=100)));case"BG_VID_0":try{var _=e.detail;_&&_.data&&0!=_.data.params.poster&&!_.parent.parent.getLayer("BG_IMG_0",1)&&_.parent.parent.getLayer("BG_IMG").addLayer(X.builder.layers.ImageLayer,"BG_IMG_0",Z(z.cloneObject(_.data)),N)}catch(e){}return}return;case"actuate":i.addAttr("actuated"),-1!==["capture","capture-image","capture-gif"].indexOf(K)&&i.addAttr("snapshot",{name:"snapshot",global:!0}),"debug"===K&&(z.isEmptyString(Y.scope[1])||i.addAttr("mode_debug_"+Y.scope[1]),Y.grid&&i.addAttr("mode_debug_grid"),i.events.mouseover_custom=z.addEventSimple(i.target,"mouseover",function(){i.removeAttr("mode_"+K)}),i.events.mouseout_custom=z.addEventSimple(i.target,"mouseout",function(){i.addAttr("mode_"+K,{name:"mode_"+K,global:!0})})),i.load();break;case"load":i.getLayer("CV").init(),q(i,function(){i.getLayer("CV").execute("init",!1),!0!==i.inanimate&&-1===["capture","capture-image","capture-gif"].indexOf(K)||i.addAttr("anim_no"),-1!==["capture","capture-image"].indexOf(K)&&i.stop()});break;case"resize":"RxR"===D.NAME&&(i.removeAttr("actuated"),i.removeAttr("ready"),i.execute("destroy",!1),i.addAttr("actuated"),i.getLayer("CV").init(),q(i,function(){i.getLayer("CV").execute("init",!1)}));break;case"interaction":i.removeAttr("anim_no_dur");break;case"stop":i.interacted||"debug"===K||i.addAttr("anim_no_dur"),i.execute("stop",!1,[i.interacted])}break;case"SQ":switch(e.type){case"set":break;case"play":i.removeAttrs("SQ_paused");break;case"init":i.playable()&&(i.load(),-1!==["capture","capture-image","capture-video","capture-gif"].indexOf(K)?(r=function(){i.play()},s=function(){var t=U.length;z.each(U,function(e){e.loaded&&t--}),t<=0?(a.timeline.clearTimeout(a.timers.wait_delay),a.timeline.clearTimeout(a.timers.wait),r()):a.timers.wait=a.timeline.setTimeout(function(){s()},10,!0)},(a=i).timers.wait=a.timeline.setTimeout(function(){s()},10,!0),a.timers.wait_delay=a.timeline.setTimeout(function(){a.timeline.clearTimeout(a.timers.wait_delay),a.timeline.clearTimeout(a.timers.wait),r()},1e4,!0)):i.play());break;case"pause":i.addAttrs("SQ_paused");break;case"change":case"repeat":i.next===i.previous&&i.previous?(i.previous.removeAttrs(["SQ_current"]),i.previous.addAttrs(["SQ_previous","SQ_next"])):(i.previous&&(i.previous.removeAttrs(["SQ_current","SQ_next"]),i.previous.addAttrs(["SQ_previous"])),i.next&&(i.next.removeAttrs(["SQ_previous","SQ_current"]),i.next.addAttrs(["SQ_next"]))),i.current&&(i.current.removeAttrs(["SQ_previous","SQ_next"]),i.current.addAttrs(["SQ_current"])),i.looped?i.addAttrs("SQ_looped"):i.current.removeAttrs("SQ_looped"),i.repeated?i.addAttrs("SQ_repeated"):i.removeAttrs("SQ_repeated"),i.removeAttrs(["SQ_forwards","SQ_backwards"]),0<i.direction?i.addAttrs("SQ_forwards"):i.direction<0&&i.addAttrs("SQ_backwards"),i.load();try{i.previous&&i.removeAttr("SQ_frame_"+i.previous.index),i.current&&i.addAttr("SQ_frame_"+i.current.index)}catch(e){}var u=i;try{var p=u.root.getLayer("CV",2),m=u.current,y=m.getMacros(),g="SQ_type_"+y.SQ_type;te(p,"SQ_type",g),z.each(["SQ"],function(e){te(p,e+"_layout",e+"_layout_"+y[e+"_layout"])}),z.each(["CV"],function(e){te(p,e+"_theme",e+"_theme_"+y["SQ_"+e+"_theme"])}),z.each(["UL","IL","EL","VS"],function(e){var t=p.getLayer(e+"_BG",4);te(t,e+"_bg","bg_"+y["SQ_"+e+"_bg"])}),z.each(["OL"],function(e){var t=p.getLayer(e+"_GR",4);te(t,e+"_gr","gr_"+y["SQ_"+e+"_gr"])}),z.each(["LG"],function(e){var t=p.getLayer(e+"_OBJ",4),a=y["SQ_"+e+"_lg"],r=y["SQ_"+e+"_sh"];te(t,e+"_lg","lg_"+a),te(t,e+"_sh","sh_"+r)}),z.each(["MS","PS","CS","VS"],function(e){var t,a=y["SQ_"+e+"_st"],r=y["SQ_"+e+"_sh"],s=y.SQ_BS_bt;switch(e){case"MS":t=m.getLayer(e+"_OBJ",4);break;case"PS":a=y.SQ_MS_st,r=y.SQ_MS_sh,t=p.getLayer(e+"_OBJ",4);break;case"CS":a=y.SQ_PS_st,r=y.SQ_PS_sh,t=p.getLayer(e+"_OBJ",4);break;default:t=p.getLayer(e+"_OBJ",4)}te(t,e+"_st","st_"+a),te(t,e+"_sh","sh_"+r),te(t,e+"_bt","bt_"+s)});try{var S=p.getLayer("BG_VID_0",6);S.playable()&&!m.getLayer("FG_IMG_0",3)?S.play():S.pause()}catch(e){}try{m.getLayer("FG_IMG_0",3)?p.addAttr("BG_hide"):p.removeAttr("BG_hide")}catch(e){}try{ee(p.getLayer("PS_TXT_1",4))}catch(e){}try{"SQ_type_disclaimer"==g?p.root.getLayer("VS",2).available()?ae(u,"VS"):u.changeNext():re(u)}catch(e){}}catch(e){}$(u.root),-1!==["capture","capture-image","capture-video","capture-gif"].indexOf(K)&&1e3<=i.current.params.duration&&(i.repeated&&"capture-gif"===K||i.root.capture({delay:i.current.params.duration-100,duration:i.current.params.duration}));break;case"stop":try{-1!==["capture","capture-image","capture-video","capture-gif"].indexOf(K)&&i.root.end({delay:i.current.params.duration})}catch(e){}}break;default:switch(e.type){case"set":i.addAttr("hidden");break;case"propped":switch(i.key){case"SQ_0":case"SQ_1":case"SQ_2":case"SQ_3":case"SQ_4":case"SQ_5":case"SQ_6":case"SQ_7":case"SQ_8":case"SQ_9":case"SQ_10":case"SQ_11":case"SQ_12":case"SQ_13":case"SQ_14":case"SQ_15":case"SQ_16":case"SQ_17":case"SQ_18":case"SQ_19":case"SQ_20":case"SQ_21":case"SQ_22":case"SQ_23":case"SQ_24":case"SQ_25":case"SQ_26":case"SQ_27":case"SQ_28":case"SQ_29":case"SQ_30":case"SQ_31":case"SQ_32":var f=i;try{var v=f.macros.local,h=(f.macros.global,f.getAttrs());f.root.getLayer("CV").getAttrs();"hidden"===v.SQ_filter&&(f.enabled=!1),("micro"===v.SQ_filter&&-1===h.indexOf("CV_scale_xs")||"micro_exc"===v.SQ_filter&&-1!==h.indexOf("CV_scale_xs"))&&(f.enabled=!1),("small"===v.SQ_filter&&-1===h.indexOf("CV_scale_s")&&-1===h.indexOf("CV_scale_xs")||"small_exc"===v.SQ_filter&&(-1!==h.indexOf("CV_scale_s")||-1!==h.indexOf("CV_scale_xs")))&&(f.enabled=!1),("large"===v.SQ_filter&&-1===h.indexOf("CV_scale_l")&&-1===h.indexOf("CV_scale_xl")||"large_exc"===v.SQ_filter&&(-1!==h.indexOf("CV_scale_l")||-1!==h.indexOf("CV_scale_xl")))&&(f.enabled=!1),("snapshot"===v.SQ_filter&&-1===h.indexOf("snapshot")||"snapshot_exc"===v.SQ_filter&&-1!==h.indexOf("snapshot"))&&(f.enabled=!1),("limited"===v.SQ_filter&&-1===h.indexOf("CV_scale_xs")||"limited_exc"===v.SQ_filter&&-1!==h.indexOf("CV_scale_xs"))&&(f.enabled=!1),"all_exc"===v.SQ_filter&&(f.enabled=!1)}catch(e){}}break;case"parammed":if("CV"===i.key){var b=i;try{var Q=b.root.getMacros();Q.dealer_logo_url&&(Q.dealer_logo_url,z.isUrl(Q.dealer_logo_url))||(Q.dealer_logo_url="",b.root.addAttr("dealer_logo_empty",{name:"dealer_logo_empty",global:!0})),Q.dealer_name&&!z.isEmptyString(Q.dealer_name)||b.root.addAttr("dealer_name_empty",{name:"dealer_name_empty",global:!0})}catch(e){}}break;case"init":switch(i.sequence||i.load(),i.key){case"CL":case"LG":case"VS":try{var k=i.root.getLayer("SQ",2);k?i.gestures.gesture_custom=new z.GestureListener(i.target,function(e,t,a){var r=-((a.pageX||a.clientX)-(t.pageX||t.clientX));switch(e){case"click":j(i,k.current.clicktag.url),k.pause();break;case"start":k.pause(),k.addAttr("SQ_move");break;case"move":break;case"stop":k.removeAttr("SQ_move"),r<-20?k.changeNext():20<r&&k.changePrevious()}}):i.events.click_custom=z.addEventSimple(document.body,"click",function(){j(i)}),i.events.mouseout_custom=z.addEventSimple(i.target,"mouseout",function(){re(i)})}catch(e){}break;case"CL_PS_TXT_1":i.events.click_custom=z.addEventSimple(i.target,"click",function(){ae(i,"VS")}),i.events.mouseover_custom=z.addEventSimple(i.target,"mouseover",function(){ae(i,"VS")});break;case"CX":i.events.mouseout_custom=z.addEventSimple(i.target,"mouseout",function(){re(i)}),i.events.click_custom=z.addEventSimple(i.target,"click",function(){re(i)});break;case"MS_TXT":case"ES_TXT":case"PS_TXT":case"CS_TXT":case"VS_TXT":case"LS_TXT":R(i);break;case"LG_IMG":case"UG_IMG":case"BG_IMG":case"FG_IMG":case"VS_IMG":R(i);var A,x=i;try{x.enabled&&(A=x.sequence?x.sequence.frames[x.frame]:x.root.getLayer("CV",1),z.each(x.data.layers,function(e,t){e||A.addAttr(x.key+"_"+t+"_disabled",{name:x.key+"_"+t+"_disabled",global:!0})}))}catch(e){}}break;case"enabled":i.removeAttr("disabled");break;case"beforeload":"ImageLayer"===i.type&&U.push(i);break;case"load":case"enter":if("load"===e.type&&i.addAttr("loaded"),i.available()){if("debug"===K&&(e=>{try{if(e.key.split("_")[0]===Y.element&&0<Y.element.length){if(!e.sequence)return!0;if(e.sequence.current.index===Y.frame||e.sequence.current.getMacros().SQ_split_parent===Y.frame)return!0}}catch(e){}return!1})(i)&&i.addAttr("debug"),i.addAttrs("active"),i.removeAttr("hidden"),P(i,"in"),"ImageLayer"===i.type){Q=i;try{if(Q.enabled){if("auto"===Q.wrapper.macros.local[Q.wrapper.key+"_mask"]){var G,w=Q.props.position.blanks,L=0,V="";for(G in w)0!=w[G]&&1!=w[G]&&(L++,0==G?V+="t":1==G?V+="r":2==G?V+="b":3==G&&(V+="l"));V+="_",4<=L?Q.wrapper.addAttr(Q.key+"_mask_linear_all_",{name:!0}):0<L&&Q.wrapper.addAttr(Q.key+"_mask_linear_"+V,{name:!0})}"natural"===Q.wrapper.macros.local[Q.wrapper.key+"_mask_mode"]&&(O=Q.asset.ghost.width+"px "+Q.asset.ghost.height+"px",E=-(Q.props.position.left-Q.asset.ghost.left)+"px "+-(Q.props.position.top-Q.asset.ghost.top)+"px",Q.wrapper.addAttr(Q.key+"_mask_size",{selector:["[data-key*=_ASSET]"],css:{"mask-size":O,"-webkit-mask-size":O,"mask-position":E,"-webkit-mask-position":E}}))}}catch(e){}}if("VideoLayer"===i.type){b=i;try{b.enabled&&b.wrapper.addAttr(b.key+"_loaded")}catch(e){}}"PS_TXT_1"===i.key&&ee(i)}break;case"leave":P(i,"out"),i.removeAttr("active"),i.removeAttr("debug");break;case"empty":var O=i;try{O.addAttr("empty");var T=O.key,C=O.alias,M=O.sequence?O.sequence.frames[O.frame]:O.root.getLayer("CV",2);M.enabled&&O.parent.enabled&&(M.addAttr((C||T)+"_empty",{name:(C||T)+"_empty",global:!0}),M.addAttr((C||T)+"_disabled",{name:(C||T)+"_disabled",global:!0}))}catch(e){}break;case"disabled":var E=i;try{E.addAttr("disabled");var I=E.key,F=E.alias,J=E.sequence?E.sequence.frames[E.frame]:E.root.getLayer("CV",2);J.enabled&&E.parent.enabled&&J.addAttr((F||I)+"_disabled",{name:(F||I)+"_disabled",global:!0})}catch(e){}}}}function q(e,t){try{var a=0,r=1,s=function(e){d[e]=!1,a++,i()},i=function(){r<=a&&t()},c="eika";try{"auto"!==e.data.macros.brand.value&&(c=e.data.macros.brand.value)}catch(e){}o=X.url.package+"/styles/theme_"+c+".min.css",z.isUndefined(d[o])?((n=document.createElement("link")).href=o,n.type="text/css",n.rel="stylesheet",n.onload=function(){d[o]=!0,a++,i()},n.onerror=function(){s(o)},document.getElementsByTagName("head")[0].appendChild(n)):s(o)}catch(e){t()}var o,n}function P(e,t){try{var c,a=e.sequence;switch(t){case"in":c=!!a&&r(e.key,a.frames[e.frame],a.previous),z.each(e.getAnims(),function(e,t){var a=e.target,r=e.name,s=a.events.anim_end;s&&z.removeEventSimple(s.target,s.type,s.callback),c&&e.skip?a.addAttr(r+"_skip"):a.removeAttr(r+"_skip"),a.removeAttr(r+"_out"),a.addAttr(r+"_in")});break;case"out":c=!!a&&r(e.key,a.frames[e.frame],a.current),z.each(e.getAnims(),function(e,t){var a=e.target,r=e.name,s=a.events.anim_end,i=function(){s&&z.removeEventSimple(s.target,s.type,s.callback)};i(),c&&e.skip?a.addAttr(r+"_skip"):(a.addAttr(r+"_out"),a.removeAttr(r+"_skip")),a.removeAttr(r+"_in"),a.events.anim_end=z.addEventSimple(a.target,o(),function(){i(),a.removeAttr(r+"_out"),a.addAttr("hidden")})})}}catch(e){}}function R(e){try{e.enabled&&(e.addAttr(e.key+"_align_x_"+z.getStyle(e.target,"textAlign")),e.addAttr(e.key+"_align_y_"+z.getStyle(e.target,"verticalAlign")))}catch(e){}}function e(e){D.trackEventNativeDef("log","error","ERR_ADVERT_CRITICAL"),D.showFallback()}function j(e,t){e=e.getClickTag(t),D.clickThrough(e.url,e.vars)}var D=X.container,z=X.utils||X.utilities,U=[],d={},K=null,W=null,H=null,Y={},o=function(){var e,t=document.createElement("div"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(void 0!==t.style[e])return a[e]},Z=function(e){var a=e;try{e&&a&&(a.type="ImageLayer",a.params.polite=!1,a.params.wrapper&&(a.params.wrapper=a.params.wrapper.split("VID").join("IMG")),a.params.holder&&(a.params.holder=a.params.holder.split("VID").join("IMG")),e.sources&&z.each(e.sources,function(e,t){e&&(a.sources[t]={width:e.width,height:e.height,url:e.edit_url||e.thumb_url})}),e.excepts)&&z.each(e.excepts,function(e,t){e&&"preset"!==t&&(a.excepts[t]=Z(e))})}catch(e){}return a},r=function(e,t,a){var r,s,i,c,o=!1;try{t&&a&&(r=t.getLayer(e,10),s=a.getLayer(e,10),r)&&s&&r.type===s.type&&r.enabled===s.enabled&&r.type===s.type&&JSON.stringify(r.sources)===JSON.stringify(s.sources)&&JSON.stringify(r.excepts)===JSON.stringify(s.excepts)&&("TextLayer"===r.type&&(i=t.getMacros(),c=a.getMacros(),i.SQ_split!==c.SQ_split)||(o=!0))}catch(e){}return o},$=function(e){try{-1===e.getAttrs().indexOf("ready")&&e.addAttr("ready")}catch(e){}},ee=function(e){try{var t,a,r;e.root&&(t=e.root.getLayer("CL_"+e.key,2)).target&&(a=t.target.style,e.enabled&&e.target&&"none"!==e.target.style.display&&!0===e.macros.local.gesture_hover?(0<(r=e.target.getElementsByTagName("p")[0].getBoundingClientRect()).width&&0<r.height&&(a.left=r.left+"px",a.top=r.top+"px",a.width=r.width+"px",a.height=r.height+"px"),e.addAttr("gesture")):(a.left=a.top=a.width=a.height="0px",e.removeAttr("gesture")))}catch(e){}},te=function(e,t,a){try{e.custom[t]&&e.custom[t]===a||(e.removeAttr(e.custom[t]),e.custom[t]=a,e.addAttr(a))}catch(e){}},ae=function(e,t){try{var a=e.root.getLayer("CV",2),r=e.root.getLayer("SQ",2);r!==e&&(a.addAttr(t+"_gesture"),r.pause()),a.addAttr(t+"_active")}catch(e){}},re=function(e){try{var t=e.root.getLayer("CV",2),a=e.root.getLayer("SQ",2);a!==e?a.play():a.current.index!==e.frame&&(t.removeAttr("VS_gesture"),t.removeAttr("VS_active"))}catch(e){}};D.ready(function(t){z.addEventSimple(window,"error",e),z.addEventSimple(document.body,"error",e),Y=t.editor,z.each(["BN"],function(e){window.banner=window[e]=new X.builder.layers.BannerLayer(e,t.banner,N)})})})(tactic);